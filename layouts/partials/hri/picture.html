

{{- /*
  image.html
  Takes inputs and page context.
  - Passes inputs to params partial for processing
  - Then passes params to generate-widths for image generation
  - Then passes params to picture-tag to generate HTML

  @author @sean-au

  @context . Context (dict) from a page template, figure/image partial, or render hook partial.

  @access public

  @example - Go Template
  {{ partial "image" (dict "src" "image.jpg" "alt" "alt text") }}

*/ -}}

{{- /* get common params*/ -}}
{{ $params := . }}
{{ if not $params.common.img }}
  {{ $common := dict }}
  {{ if not .common.origin }}
    {{ $common := dict "partial" "picture" }}
    {{- $params = merge $params (partial "hri/private/params/common.html" (merge . (dict "common" $common))) }}
  {{ else }}
    {{- $params = merge $params (partial "hri/private/params/common.html" . ) }}
  {{ end }}
{{ end }}


{{- /* santize inputs, process params */ -}}
{{- /* only selected params are passed throgh */ -}}
{{- $params = partial "hri/private/params/image.html" $params }}

{{- /* generate image widths*/ -}}
{{- $params = partial "hri/private/gen/widths" $params -}}

{{- /* generate picture or img tag */ -}}
{{- if $params.image_only -}}
  {{- partial "hri/private/print/image-set" $params -}}
{{- else -}}
  {{- partial "hri/private/print/picture-set" $params -}}
{{- end -}}


