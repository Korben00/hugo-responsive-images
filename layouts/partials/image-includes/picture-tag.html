<picture>
{{- range $format, $values := .picture }}
  <source
  {{ if eq $.params.loading "lazysizes" }}
    data-srcset="{{ .srcset }}"
  {{- else -}}
    srcset="{{ .srcset }}"
  {{- end -}}
  {{- if eq $.params.format "original" }}
    type="{{ $.params.img.MediaType }}"
  {{- else }}
    type="{{ printf "image/%s" $.params.format }}"
  {{- end }}
  />
{{- end }}
{{- with .picture.original.src }}
  <img
  {{- if eq $.params.loading (or "auto" "lazy") }}
    loading="{{ $.params.loading }}"
  {{- end -}}
  {{- if eq $.params.loading "lazysizes" }}
    data-src="{{ .RelPermalink }}"
    {{- with $.picture.original.placeholder }}
    src="{{ . | safeURL }}"
    {{- end }}
  {{- else if $.params.provider }}
    src="{{ . }}"
    height="{{ $.params.img.Height }}"
    width="{{ $.params.img.Width }}"
  {{- else }}
    src="{{ .RelPermalink }}"
    height="{{ .Height }}"
    width="{{ .Width }}"
  {{- end }}
  {{- with $.params.class }}
    class="{{ . }}"
  {{- end -}}
  {{- with $.params.sizes }}
    {{ . | safeHTMLAttr }}
  {{- end }}
  {{- with $.params.alt }}
    alt="{{ . }}"
  {{- end }}
  {{- with $.params.title }}
    title="{{ . }}"
  {{- end }}
  />
{{ end  -}}
</picture>
